<?xml version="1.0"?>
<root>
<twister_user_defined>

<field_section>
	<field ID="res_id" Type="DbSelect" FieldName="id" FromTable="results" SQLQuery="select MAX(id)+1 from results" Label="" GUIDefined="false" Mandatory="true" />
	<field ID="log_id" Type="DbSelect" FieldName="id" FromTable="logs"    SQLQuery="select MAX(id)+1 from logs" Label="" GUIDefined="false" Mandatory="true" />

	<field ID="test_id"  FieldName="id" FromTable="tests" SQLQuery="select DISTINCT id from tests" Label="Test:" Type="UserSelect" GUIDefined="true" Mandatory="true" />
	<field ID="suite_id" FieldName="id" FromTable="suite" SQLQuery="select DISTINCT id from suite" Label="Suite:" Type="UserSelect" GUIDefined="true" Mandatory="true" />
	<field ID="site_id"  FieldName="id" FromTable="sites" SQLQuery="select DISTINCT id from sites" Label="Site:" Type="UserSelect" GUIDefined="true" Mandatory="true" />
	<field ID="sut_id"   FieldName="id" FromTable="suts" SQLQuery="select suts.id, app.name, ipo.name, os.name_vers from suts,app,ipo,os where (suts.app_id = app.id and suts.app_id = ipo.id and suts.os_id = os.id)" Label="SUT:" Type="UserSelect" GUIDefined="true" Mandatory="true" />
	<field ID="pri_id"   FieldName="id" FromTable="pri" SQLQuery="select DISTINCT id from pri" Label="PRI:" Type="UserSelect" GUIDefined="true" Mandatory="true" />
	<field ID="regression" SQLQuery="SELECT UNIQUE regressionType FROM results" Label="Regression Type:" Type="UserSelect" GUIDefined="true" Mandatory="true" />

	<field ID="issueAttest"   FieldName="" FromTable="" Label="Set ATTEST issue" Type="UserText" GUIDefined="false" Mandatory="false" />
	<field ID="issueIpOffice" FieldName="" FromTable="" Label="Set IPOFFICE issue" Type="UserText" GUIDefined="false" Mandatory="false" />
	<field ID="comments"  FieldName="" FromTable="" Label="Set comments" Type="UserText" GUIDefined="false" Mandatory="false" />
	<field ID="actionWho" FieldName="" FromTable="" Label="Tester Name" Type="UserText" GUIDefined="true" Mandatory="true" />
	<field ID="hashCode"  FieldName="" FromTable="" Label="Set hash code" Type="UserText" GUIDefined="true" Mandatory="false" />
	<field ID="hashMessage"  FieldName="" FromTable="" Label="Set hash message" Type="UserText" GUIDefined="true" Mandatory="false" />
	<field ID="synchronized" FieldName="" FromTable="" Label="Synchronized" Type="UserText" GUIDefined="true" Mandatory="false" />
</field_section>

<insert_section>
	<sql_statement>INSERT INTO logs(id, logfile_ref, logfile_archive) VALUES ( @log_id@, '{twister_tc_name}', '{twister_tc_log}' )</sql_statement>
	<sql_statement>INSERT INTO results VALUES( @res_id@, {test_id}, {suite_id}, {sut_id}, {site_id}, @log_id@-1, {pri_id}, '{twister_tc_status}', '{twister_tc_date_started}', {twister_tc_time_elapsed}, {regression}, {issueAttest}, {issueIpOffice}, '{comments}', '{actionWho}', '{hashCode}', '{hashMessage}', {twister_tc_crash_detected}, {synchronized} )</sql_statement>
</insert_section>

<reports_section>
	<field ID="Other" Type="UserText" Label="Other filters" SQLQuery="" />
	<field ID="Date" Type="UserSelect" Label="Select date" SQLQuery="SELECT DISTINCT tdate FROM repo_test_view ORDER BY tdate" />
	<field ID="DateStart" Label="Select date Start" Type="UserSelect" SQLQuery="SELECT DISTINCT tdate FROM repo_test_view ORDER BY tdate" />
	<field ID="zDateEnd" Label="Select date End" Type="UserSelect" SQLQuery="SELECT DISTINCT tdate FROM repo_test_view ORDER BY tdate" />
	<field ID="TestStatus" Label="Select test status" Type="UserSelect" SQLQuery="SELECT DISTINCT status FROM repo_test_view ORDER BY status" />
	<field ID="Release" Label="Select release" Type="UserSelect" SQLQuery="SELECT id,name FROM repo_release" />
	<field ID="Build" Label="Select build" Type="UserSelect" SQLQuery="SELECT id,name FROM repo_build" />
	<field ID="Suite" Label="Select suite" Type="UserSelect" SQLQuery="SELECT id,name FROM repo_suite" />
	<field ID="Station" Label="Select station" Type="UserSelect" SQLQuery="SELECT id,name FROM repo_station" />

	<report ID="Total" Type="Table"
		SQLQuery="SELECT * FROM repo_test_view WHERE station_id = '@Station@'"
		/>
	<report ID="Details" Type="Table"
		SQLQuery="SELECT * FROM repo_test_view WHERE release_id = '@Release@' AND build_id = '@Build@' "
		/>
	<report ID="History" Type="BarChart"
		SQLQuery="SELECT build_id AS 'Build', status AS 'Percent (%)' FROM (SELECT build_id, COUNT(status) as status FROM repo_test_view WHERE release_id='@Release@' AND status='@TestStatus@' GROUP BY build_id) v RIGHT JOIN repo_build b ON b.id = v.build_id"
		SQLTotal="SELECT build_id AS 'Build', status AS 'Percent (%)' FROM (SELECT build_id, COUNT(status) as status FROM repo_test_view WHERE release_id='@Release@' GROUP BY build_id) v RIGHT JOIN repo_build b ON b.id = v.build_id"
		/>
	<report ID="Summary Pie" Type="PieChart"
		SQLQuery="SELECT status AS 'Status',COUNT(status) AS 'Count' FROM repo_test_view  WHERE (release_id = '@Release@' AND build_id = '@Build@') group by status"
		/>
	<report ID="Pass Rate" Type="LineChart"
		SQLQuery="SELECT tdate AS 'Date', COUNT(status) AS 'Pass Rate (%)' FROM repo_test_view WHERE tdate &gt;= '@DateStart@' AND tdate &lt;= '@zDateEnd@' AND status='Pass' @Other@ GROUP BY tdate"
		SQLTotal="SELECT tdate AS 'Date', COUNT(status) AS 'Pass Rate (%)' FROM repo_test_view WHERE tdate &gt;= '@DateStart@' AND tdate &lt;= '@zDateEnd@' @Other@ GROUP BY tdate"
		/>

	<redirect ID="goto Yahoo" Path="http://ro.yahoo.com" />
	<redirect ID="goto Google" Path="http://www.google.ro" />
</reports_section>

</twister_user_defined>
</root>